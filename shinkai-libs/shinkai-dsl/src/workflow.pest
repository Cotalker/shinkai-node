WHITESPACE = _{ " " | "\t" | NEWLINE }
workflow = { "workflow" ~ WHITESPACE ~ ident ~ WHITESPACE? ~ "{" ~ WHITESPACE? ~ task* ~ function* ~ function_call* ~ WHITESPACE? ~ "}" }
task = { "task" ~ WHITESPACE ~ string ~ WHITESPACE? ~ "{" ~ WHITESPACE? ~ ("depends_on" ~ WHITESPACE? ~ "[" ~ WHITESPACE? ~ string* ~ WHITESPACE? ~ "]")? ~ WHITESPACE? ~ "}" }
depends_on = { "depends_on" ~ WHITESPACE? ~ "[" ~ WHITESPACE? ~ string* ~ WHITESPACE? ~ "]" }
function = { "function" ~ WHITESPACE ~ ident ~ WHITESPACE? ~ "(" ~ WHITESPACE? ~ ident* ~ WHITESPACE? ~ ")" ~ WHITESPACE? ~ "{" ~ WHITESPACE? ~ statement* ~ WHITESPACE? ~ "}" }
function_call = { ident ~ WHITESPACE? ~ "(" ~ WHITESPACE? ~ string* ~ WHITESPACE? ~ ")" }
statement = { task | function_call }
string = { "\"" ~ (!"\"" ~ ANY)* ~ "\"" }
ident = { (ASCII_ALPHANUMERIC | "_")+ }